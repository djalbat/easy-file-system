"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _path = require("../utilities/path");
var _options = require("../options");
function enableMarker() {
    this.onDragOver(dragOverHandler, this);
}
function disableMarker() {
    this.offDragOver(dragOverHandler, this);
}
function dragOverHandler(dragElement, element) {
    var collapsed = this.isCollapsed();
    if (collapsed) {
        return;
    }
    var path = this.getPath(), explorer = this.getExplorer(), dragEntryItem = dragElement, markerEntryItem = this.retrieveMarkerEntryItem(), dragEntryItemExplorer = dragEntryItem.getExplorer(), dragIntoRubbishBinOnlyOptionPresent = dragEntryItemExplorer.isOptionPresent(_options.DRAG_INTO_RUBBISH_BIN_ONLY), dragIntoTopmostDirectoriesOnlyOptionPresent = explorer.isOptionPresent(_options.DRAG_INTO_TOPMOST_DIRECTORIES_ONLY);
    if (dragIntoRubbishBinOnlyOptionPresent) {
        return;
    }
    if (dragIntoTopmostDirectoriesOnlyOptionPresent) {
        var pathTopmostPath = (0, _path).isPathTopmostPath(path);
        if (!pathTopmostPath) {
            return;
        }
    }
    var dragEntryItemName = dragEntryItem.getName(), markerEntryItemPath = markerEntryItem.getPath(), oldMarkerEntryItemPath = markerEntryItemPath, newMarkerEntryItemPath = path === null ? dragEntryItemName : "".concat(path, "/").concat(dragEntryItemName), markerEntryItemExplorer = markerEntryItem.getExplorer(), oldMarkerEntryItemExplorer = markerEntryItemExplorer, newMarkerEntryItemExplorer = explorer; ///
    if (oldMarkerEntryItemExplorer !== newMarkerEntryItemExplorer || oldMarkerEntryItemPath !== newMarkerEntryItemPath) {
        var dragEntryItemType = dragEntryItem.getType(), markerEntryItemPath1 = newMarkerEntryItemPath; ///
        explorer.removeMarker();
        explorer.addMarker(markerEntryItemPath1, dragEntryItemType);
    }
}
var _default = {
    enableMarker: enableMarker,
    disableMarker: disableMarker
};
exports.default = _default;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taXhpbnMvbWFya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBpc1BhdGhUb3Btb3N0UGF0aCB9IGZyb20gXCIuLi91dGlsaXRpZXMvcGF0aFwiO1xuaW1wb3J0IHsgRFJBR19JTlRPX1JVQkJJU0hfQklOX09OTFksIERSQUdfSU5UT19UT1BNT1NUX0RJUkVDVE9SSUVTX09OTFkgfSBmcm9tIFwiLi4vb3B0aW9uc1wiO1xuXG5mdW5jdGlvbiBlbmFibGVNYXJrZXIoKSB7XG4gIHRoaXMub25EcmFnT3ZlcihkcmFnT3ZlckhhbmRsZXIsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlTWFya2VyKCkge1xuICB0aGlzLm9mZkRyYWdPdmVyKGRyYWdPdmVySGFuZGxlciwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIGRyYWdPdmVySGFuZGxlcihkcmFnRWxlbWVudCwgZWxlbWVudCkge1xuICBjb25zdCBjb2xsYXBzZWQgPSB0aGlzLmlzQ29sbGFwc2VkKCk7XG5cbiAgaWYgKGNvbGxhcHNlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgoKSxcbiAgICAgICAgZXhwbG9yZXIgPSB0aGlzLmdldEV4cGxvcmVyKCksXG4gICAgICAgIGRyYWdFbnRyeUl0ZW0gPSBkcmFnRWxlbWVudCwgIC8vL1xuICAgICAgICBtYXJrZXJFbnRyeUl0ZW0gPSB0aGlzLnJldHJpZXZlTWFya2VyRW50cnlJdGVtKCksXG4gICAgICAgIGRyYWdFbnRyeUl0ZW1FeHBsb3JlciA9IGRyYWdFbnRyeUl0ZW0uZ2V0RXhwbG9yZXIoKSxcbiAgICAgICAgZHJhZ0ludG9SdWJiaXNoQmluT25seU9wdGlvblByZXNlbnQgPSBkcmFnRW50cnlJdGVtRXhwbG9yZXIuaXNPcHRpb25QcmVzZW50KERSQUdfSU5UT19SVUJCSVNIX0JJTl9PTkxZKSxcbiAgICAgICAgZHJhZ0ludG9Ub3Btb3N0RGlyZWN0b3JpZXNPbmx5T3B0aW9uUHJlc2VudCA9IGV4cGxvcmVyLmlzT3B0aW9uUHJlc2VudChEUkFHX0lOVE9fVE9QTU9TVF9ESVJFQ1RPUklFU19PTkxZKTtcblxuICBpZiAoZHJhZ0ludG9SdWJiaXNoQmluT25seU9wdGlvblByZXNlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZHJhZ0ludG9Ub3Btb3N0RGlyZWN0b3JpZXNPbmx5T3B0aW9uUHJlc2VudCkge1xuICAgIGNvbnN0IHBhdGhUb3Btb3N0UGF0aCA9IGlzUGF0aFRvcG1vc3RQYXRoKHBhdGgpO1xuXG4gICAgaWYgKCFwYXRoVG9wbW9zdFBhdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zdCBkcmFnRW50cnlJdGVtTmFtZSA9IGRyYWdFbnRyeUl0ZW0uZ2V0TmFtZSgpLFxuICAgICAgICBtYXJrZXJFbnRyeUl0ZW1QYXRoID0gbWFya2VyRW50cnlJdGVtLmdldFBhdGgoKSxcbiAgICAgICAgb2xkTWFya2VyRW50cnlJdGVtUGF0aCA9IG1hcmtlckVudHJ5SXRlbVBhdGgsIC8vL1xuICAgICAgICBuZXdNYXJrZXJFbnRyeUl0ZW1QYXRoID0gKHBhdGggPT09IG51bGwpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0VudHJ5SXRlbU5hbWUgOiAvLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwYXRofS8ke2RyYWdFbnRyeUl0ZW1OYW1lfWAsXG4gICAgICAgIG1hcmtlckVudHJ5SXRlbUV4cGxvcmVyID0gbWFya2VyRW50cnlJdGVtLmdldEV4cGxvcmVyKCksXG4gICAgICAgIG9sZE1hcmtlckVudHJ5SXRlbUV4cGxvcmVyID0gbWFya2VyRW50cnlJdGVtRXhwbG9yZXIsIC8vL1xuICAgICAgICBuZXdNYXJrZXJFbnRyeUl0ZW1FeHBsb3JlciA9IGV4cGxvcmVyOyAgLy8vXG5cbiAgaWYgKChvbGRNYXJrZXJFbnRyeUl0ZW1FeHBsb3JlciAhPT0gbmV3TWFya2VyRW50cnlJdGVtRXhwbG9yZXIpIHx8IChvbGRNYXJrZXJFbnRyeUl0ZW1QYXRoICE9PSBuZXdNYXJrZXJFbnRyeUl0ZW1QYXRoKSkge1xuICAgIGNvbnN0IGRyYWdFbnRyeUl0ZW1UeXBlID0gZHJhZ0VudHJ5SXRlbS5nZXRUeXBlKCksXG4gICAgICAgICAgbWFya2VyRW50cnlJdGVtUGF0aCA9IG5ld01hcmtlckVudHJ5SXRlbVBhdGg7IC8vL1xuXG4gICAgZXhwbG9yZXIucmVtb3ZlTWFya2VyKCk7XG5cbiAgICBleHBsb3Jlci5hZGRNYXJrZXIobWFya2VyRW50cnlJdGVtUGF0aCwgZHJhZ0VudHJ5SXRlbVR5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZW5hYmxlTWFya2VyLFxuICBkaXNhYmxlTWFya2VyXG59O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFVBQVk7Ozs7O0lBRXNCLEtBQW1CO0lBQzBCLFFBQVk7U0FFbEYsWUFBWTtTQUNkLFVBQVUsQ0FBQyxlQUFlOztTQUd4QixhQUFhO1NBQ2YsV0FBVyxDQUFDLGVBQWU7O1NBR3pCLGVBQWUsQ0FBQyxXQUFXLEVBQUUsT0FBTztRQUNyQyxTQUFTLFFBQVEsV0FBVztRQUU5QixTQUFTOzs7UUFJUCxJQUFJLFFBQVEsT0FBTyxJQUNuQixRQUFRLFFBQVEsV0FBVyxJQUMzQixhQUFhLEdBQUcsV0FBVyxFQUMzQixlQUFlLFFBQVEsdUJBQXVCLElBQzlDLHFCQUFxQixHQUFHLGFBQWEsQ0FBQyxXQUFXLElBQ2pELG1DQUFtQyxHQUFHLHFCQUFxQixDQUFDLGVBQWUsQ0F0QkosUUFBWSw4QkF1Qm5GLDJDQUEyQyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBdkJDLFFBQVk7UUF5QnJGLG1DQUFtQzs7O1FBSW5DLDJDQUEyQztZQUN2QyxlQUFlLE9BL0JTLEtBQW1CLG9CQStCUCxJQUFJO2FBRXpDLGVBQWU7Ozs7UUFLaEIsaUJBQWlCLEdBQUcsYUFBYSxDQUFDLE9BQU8sSUFDekMsbUJBQW1CLEdBQUcsZUFBZSxDQUFDLE9BQU8sSUFDN0Msc0JBQXNCLEdBQUcsbUJBQW1CLEVBQzVDLHNCQUFzQixHQUFJLElBQUksS0FBSyxJQUFJLEdBQ1osaUJBQWlCLE1BQ0osTUFBaUIsQ0FBekIsSUFBSSxHQUFDLENBQUMsR0FBb0IsTUFBQSxDQUFsQixpQkFBaUIsR0FDekQsdUJBQXVCLEdBQUcsZUFBZSxDQUFDLFdBQVcsSUFDckQsMEJBQTBCLEdBQUcsdUJBQXVCLEVBQ3BELDBCQUEwQixHQUFHLFFBQVEsQ0FBRyxDQUFHLEFBQUgsRUFBRyxBQUFILENBQUc7UUFFNUMsMEJBQTBCLEtBQUssMEJBQTBCLElBQU0sc0JBQXNCLEtBQUssc0JBQXNCO1lBQzdHLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxPQUFPLElBQ3pDLG9CQUFtQixHQUFHLHNCQUFzQixDQUFFLENBQUcsQUFBSCxFQUFHLEFBQUgsQ0FBRztRQUV2RCxRQUFRLENBQUMsWUFBWTtRQUVyQixRQUFRLENBQUMsU0FBUyxDQUFDLG9CQUFtQixFQUFFLGlCQUFpQjs7OztJQUszRCxZQUFZLEVBQVosWUFBWTtJQUNaLGFBQWEsRUFBYixhQUFhIn0=