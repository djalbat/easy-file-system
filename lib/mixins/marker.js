"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _path = require("../utilities/path");
var _options = require("../options");
function enableMarker() {
    this.onDragOver(dragOverHandler, this);
}
function disableMarker() {
    this.offDragOver(dragOverHandler, this);
}
function dragOverHandler(dragElement, element) {
    var collapsed = this.isCollapsed();
    if (collapsed) {
        return;
    }
    var path = this.getPath(), explorer = this.getExplorer(), dragEntryItem = dragElement, markerEntryItem = this.retrieveMarkerEntryItem(), dragEntryItemIgnored = dragEntryItem.isIgnored(explorer);
    if (dragEntryItemIgnored) {
        return;
    }
    var dragIntoTopmostDirectoriesOnlyOptionPresent = explorer.isOptionPresent(_options.DRAG_INTO_TOPMOST_DIRECTORIES_ONLY_OPTION);
    if (dragIntoTopmostDirectoriesOnlyOptionPresent) {
        var pathTopmostPath = (0, _path).isPathTopmostPath(path);
        if (!pathTopmostPath) {
            return;
        }
    }
    var dragEntryItemName = dragEntryItem.getName(), markerEntryItemPath = markerEntryItem.getPath(), oldMarkerEntryItemPath = markerEntryItemPath, newMarkerEntryItemPath = path === null ? dragEntryItemName : "".concat(path, "/").concat(dragEntryItemName), markerEntryItemExplorer = markerEntryItem.getExplorer(), oldMarkerEntryItemExplorer = markerEntryItemExplorer, newMarkerEntryItemExplorer = explorer; ///
    if (oldMarkerEntryItemExplorer !== newMarkerEntryItemExplorer || oldMarkerEntryItemPath !== newMarkerEntryItemPath) {
        var dragEntryItemType = dragEntryItem.getType(), markerEntryItemPath = newMarkerEntryItemPath; ///
        explorer.removeMarker();
        explorer.addMarker(markerEntryItemPath, dragEntryItemType);
    }
}
var _default = {
    enableMarker: enableMarker,
    disableMarker: disableMarker
};
exports.default = _default;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taXhpbnMvbWFya2VyLmpzIl0sIm5hbWVzIjpbImlzUGF0aFRvcG1vc3RQYXRoIiwiRFJBR19JTlRPX1RPUE1PU1RfRElSRUNUT1JJRVNfT05MWV9PUFRJT04iLCJlbmFibGVNYXJrZXIiLCJvbkRyYWdPdmVyIiwiZHJhZ092ZXJIYW5kbGVyIiwiZGlzYWJsZU1hcmtlciIsIm9mZkRyYWdPdmVyIiwiZHJhZ0VsZW1lbnQiLCJlbGVtZW50IiwiY29sbGFwc2VkIiwiaXNDb2xsYXBzZWQiLCJwYXRoIiwiZ2V0UGF0aCIsImV4cGxvcmVyIiwiZ2V0RXhwbG9yZXIiLCJkcmFnRW50cnlJdGVtIiwibWFya2VyRW50cnlJdGVtIiwicmV0cmlldmVNYXJrZXJFbnRyeUl0ZW0iLCJkcmFnRW50cnlJdGVtSWdub3JlZCIsImlzSWdub3JlZCIsImRyYWdJbnRvVG9wbW9zdERpcmVjdG9yaWVzT25seU9wdGlvblByZXNlbnQiLCJpc09wdGlvblByZXNlbnQiLCJwYXRoVG9wbW9zdFBhdGgiLCJkcmFnRW50cnlJdGVtTmFtZSIsImdldE5hbWUiLCJtYXJrZXJFbnRyeUl0ZW1QYXRoIiwib2xkTWFya2VyRW50cnlJdGVtUGF0aCIsIm5ld01hcmtlckVudHJ5SXRlbVBhdGgiLCJtYXJrZXJFbnRyeUl0ZW1FeHBsb3JlciIsIm9sZE1hcmtlckVudHJ5SXRlbUV4cGxvcmVyIiwibmV3TWFya2VyRW50cnlJdGVtRXhwbG9yZXIiLCJkcmFnRW50cnlJdGVtVHlwZSIsImdldFR5cGUiLCJyZW1vdmVNYXJrZXIiLCJhZGRNYXJrZXIiXSwibWFwcGluZ3MiOiJDQUFBLFVBQVk7Ozs7O0FBRXNCLEdBQW1CLENBQW5CLEtBQW1CO0FBQ0ssR0FBWSxDQUFaLFFBQVk7U0FFN0QsWUFBWSxHQUFHLENBQUM7SUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEVBQUUsSUFBSTtBQUN2QyxDQUFDO1NBRVEsYUFBYSxHQUFHLENBQUM7SUFDeEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLEVBQUUsSUFBSTtBQUN4QyxDQUFDO1NBRVEsZUFBZSxDQUFDLFdBQVcsRUFBRSxPQUFPLEVBQUUsQ0FBQztJQUM5QyxHQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXO0lBRWxDLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQztRQUNkLE1BQU07SUFDUixDQUFDO0lBRUQsR0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxJQUNuQixRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFDM0IsYUFBYSxHQUFHLFdBQVcsRUFDM0IsZUFBZSxHQUFHLElBQUksQ0FBQyx1QkFBdUIsSUFDOUMsb0JBQW9CLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxRQUFRO0lBRTdELEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxDQUFDO1FBQ3pCLE1BQU07SUFDUixDQUFDO0lBRUQsR0FBSyxDQUFDLDJDQUEyQyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBM0JwQixRQUFZO0lBNkJwRSxFQUFFLEVBQUUsMkNBQTJDLEVBQUUsQ0FBQztRQUNoRCxHQUFLLENBQUMsZUFBZSxPQS9CUyxLQUFtQixvQkErQlAsSUFBSTtRQUU5QyxFQUFFLEdBQUcsZUFBZSxFQUFFLENBQUM7WUFDckIsTUFBTTtRQUNSLENBQUM7SUFDSCxDQUFDO0lBRUQsR0FBSyxDQUFDLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxPQUFPLElBQ3pDLG1CQUFtQixHQUFHLGVBQWUsQ0FBQyxPQUFPLElBQzdDLHNCQUFzQixHQUFHLG1CQUFtQixFQUM1QyxzQkFBc0IsR0FBSSxJQUFJLEtBQUssSUFBSSxHQUNaLGlCQUFpQixNQUNKLE1BQWlCLENBQXpCLElBQUksR0FBQyxDQUFDLEdBQW9CLE1BQUEsQ0FBbEIsaUJBQWlCLEdBQ3pELHVCQUF1QixHQUFHLGVBQWUsQ0FBQyxXQUFXLElBQ3JELDBCQUEwQixHQUFHLHVCQUF1QixFQUNwRCwwQkFBMEIsR0FBRyxRQUFRLENBQUcsQ0FBRyxBQUFILEVBQUcsQUFBSCxDQUFHO0lBRWpELEVBQUUsRUFBRywwQkFBMEIsS0FBSywwQkFBMEIsSUFBTSxzQkFBc0IsS0FBSyxzQkFBc0IsRUFBRyxDQUFDO1FBQ3ZILEdBQUssQ0FBQyxpQkFBaUIsR0FBRyxhQUFhLENBQUMsT0FBTyxJQUN6QyxtQkFBbUIsR0FBRyxzQkFBc0IsQ0FBRSxDQUFHLEFBQUgsRUFBRyxBQUFILENBQUc7UUFFdkQsUUFBUSxDQUFDLFlBQVk7UUFFckIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRSxpQkFBaUI7SUFDM0QsQ0FBQztBQUNILENBQUM7ZUFFYyxDQUFDO0lBQ2QsWUFBWSxFQUFaLFlBQVk7SUFDWixhQUFhLEVBQWIsYUFBYTtBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgaXNQYXRoVG9wbW9zdFBhdGggfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3BhdGhcIjtcbmltcG9ydCB7IERSQUdfSU5UT19UT1BNT1NUX0RJUkVDVE9SSUVTX09OTFlfT1BUSU9OIH0gZnJvbSBcIi4uL29wdGlvbnNcIjtcblxuZnVuY3Rpb24gZW5hYmxlTWFya2VyKCkge1xuICB0aGlzLm9uRHJhZ092ZXIoZHJhZ092ZXJIYW5kbGVyLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZU1hcmtlcigpIHtcbiAgdGhpcy5vZmZEcmFnT3ZlcihkcmFnT3ZlckhhbmRsZXIsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBkcmFnT3ZlckhhbmRsZXIoZHJhZ0VsZW1lbnQsIGVsZW1lbnQpIHtcbiAgY29uc3QgY29sbGFwc2VkID0gdGhpcy5pc0NvbGxhcHNlZCgpO1xuXG4gIGlmIChjb2xsYXBzZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKCksXG4gICAgICAgIGV4cGxvcmVyID0gdGhpcy5nZXRFeHBsb3JlcigpLFxuICAgICAgICBkcmFnRW50cnlJdGVtID0gZHJhZ0VsZW1lbnQsICAvLy9cbiAgICAgICAgbWFya2VyRW50cnlJdGVtID0gdGhpcy5yZXRyaWV2ZU1hcmtlckVudHJ5SXRlbSgpLFxuICAgICAgICBkcmFnRW50cnlJdGVtSWdub3JlZCA9IGRyYWdFbnRyeUl0ZW0uaXNJZ25vcmVkKGV4cGxvcmVyKTtcblxuICBpZiAoZHJhZ0VudHJ5SXRlbUlnbm9yZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBkcmFnSW50b1RvcG1vc3REaXJlY3Rvcmllc09ubHlPcHRpb25QcmVzZW50ID0gZXhwbG9yZXIuaXNPcHRpb25QcmVzZW50KERSQUdfSU5UT19UT1BNT1NUX0RJUkVDVE9SSUVTX09OTFlfT1BUSU9OKTtcblxuICBpZiAoZHJhZ0ludG9Ub3Btb3N0RGlyZWN0b3JpZXNPbmx5T3B0aW9uUHJlc2VudCkge1xuICAgIGNvbnN0IHBhdGhUb3Btb3N0UGF0aCA9IGlzUGF0aFRvcG1vc3RQYXRoKHBhdGgpO1xuXG4gICAgaWYgKCFwYXRoVG9wbW9zdFBhdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zdCBkcmFnRW50cnlJdGVtTmFtZSA9IGRyYWdFbnRyeUl0ZW0uZ2V0TmFtZSgpLFxuICAgICAgICBtYXJrZXJFbnRyeUl0ZW1QYXRoID0gbWFya2VyRW50cnlJdGVtLmdldFBhdGgoKSxcbiAgICAgICAgb2xkTWFya2VyRW50cnlJdGVtUGF0aCA9IG1hcmtlckVudHJ5SXRlbVBhdGgsIC8vL1xuICAgICAgICBuZXdNYXJrZXJFbnRyeUl0ZW1QYXRoID0gKHBhdGggPT09IG51bGwpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0VudHJ5SXRlbU5hbWUgOiAvLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwYXRofS8ke2RyYWdFbnRyeUl0ZW1OYW1lfWAsXG4gICAgICAgIG1hcmtlckVudHJ5SXRlbUV4cGxvcmVyID0gbWFya2VyRW50cnlJdGVtLmdldEV4cGxvcmVyKCksXG4gICAgICAgIG9sZE1hcmtlckVudHJ5SXRlbUV4cGxvcmVyID0gbWFya2VyRW50cnlJdGVtRXhwbG9yZXIsIC8vL1xuICAgICAgICBuZXdNYXJrZXJFbnRyeUl0ZW1FeHBsb3JlciA9IGV4cGxvcmVyOyAgLy8vXG5cbiAgaWYgKChvbGRNYXJrZXJFbnRyeUl0ZW1FeHBsb3JlciAhPT0gbmV3TWFya2VyRW50cnlJdGVtRXhwbG9yZXIpIHx8IChvbGRNYXJrZXJFbnRyeUl0ZW1QYXRoICE9PSBuZXdNYXJrZXJFbnRyeUl0ZW1QYXRoKSkge1xuICAgIGNvbnN0IGRyYWdFbnRyeUl0ZW1UeXBlID0gZHJhZ0VudHJ5SXRlbS5nZXRUeXBlKCksXG4gICAgICAgICAgbWFya2VyRW50cnlJdGVtUGF0aCA9IG5ld01hcmtlckVudHJ5SXRlbVBhdGg7IC8vL1xuXG4gICAgZXhwbG9yZXIucmVtb3ZlTWFya2VyKCk7XG5cbiAgICBleHBsb3Jlci5hZGRNYXJrZXIobWFya2VyRW50cnlJdGVtUGF0aCwgZHJhZ0VudHJ5SXRlbVR5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZW5hYmxlTWFya2VyLFxuICBkaXNhYmxlTWFya2VyXG59O1xuIl19